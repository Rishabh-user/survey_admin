<header class="dashboard-header sticky top-0">
    <div class="app-header">
        <div class="d-flex justify-content-between align-items-center h-100">
            <div class="d-flex align-items-center">
                <div class="">
                    <button class="btn p-0" type="button" (click)="themeService.toggle()"><ng-icon
                            name="heroBars3"></ng-icon></button>
                </div>
            </div>
            <div class="search-bar">
                <!-- <input type="text" class="form-control form-control-small" placeholder="Search Survey">
                <ng-icon name="heroMagnifyingGlass" class="magnifyingicon"></ng-icon> -->
                <mat-form-field class="search-bar">
                    <input type="text" matInput [formControl]="surveyControl" placeholder="Search Survey"
                        [matAutocomplete]="auto">
                    <!-- <input type="text" matInput [formControl]="surveyControlform" placeholder="Search Survey"
                        [matAutocomplete]="auto" (keyup.enter)="search(surveyControlform.value)"> -->
                    <ng-icon name="heroMagnifyingGlass" class="magnifyingicon"></ng-icon>
                    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onSurveySelected($event)">
                        <mat-option *ngFor="let survey of filteredSurveys" [value]="survey.name">
                            {{ survey.name }}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>
            </div>
            <div class="d-flex align-items-center">
                <div class="position-relative d-inline-block notification-container">
                    <a routerLink="#"><ng-icon name="heroBell" class="bellicon"
                            (click)="toggleNotification()"></ng-icon></a>
                    <div class="notification-overlay" *ngIf="showNotification" (click)="toggleNotification()"></div>
                    <div class="notification-box" *ngIf="showNotification">
                        <div class="d-flex justify-content-between align-items-center p-3">
                            <h5>Notification</h5>
                            <ng-icon name="heroXMark" class="heroXMark" (click)="toggleNotification()"></ng-icon>
                        </div>
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="notification-tab" data-bs-toggle="tab"
                                    data-bs-target="#notification-tab-pane" type="button" role="tab"
                                    aria-controls="notification-tab-pane" aria-selected="true">Notification</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="global-tab" data-bs-toggle="tab"
                                    data-bs-target="#global-tab-pane" type="button" role="tab"
                                    aria-controls="global-tab-pane" aria-selected="false">Global Notification</button>
                            </li>
                        </ul>
                        <div class="tab-content notification-list" id="myTabContent">
                            <div class="tab-pane fade show active" id="notification-tab-pane" role="tabpanel"
                                aria-labelledby="notification-tab" tabindex="0">
                                <ul *ngFor="let item of notificationdata">
                                    <li *ngIf="item.isGlobal !== true">
                                        <figure>
                                            <img [src]="item.image" class="img-fluid" alt="logo" width="100"
                                                height="100">
                                            <span class="admin-verified"><img *ngIf="item.status === 'ACT'"
                                                [src]="baseUrl + '/assets/images/icons/verify.png'" class="img-fluid"
                                                    alt="admin" width="20" height="20"></span>
                                        </figure>
                                        <figcaption>
                                            <p><strong>{{item.userName}}</strong></p>
                                            <p>{{item.massage}}</p>
                                            <div class="date-time">
                                                <span>{{item.createdDate | date: 'medium'}}</span>
                                            </div>
                                        </figcaption>
                                    </li>
                                    <!-- <li>
                                        <figure>
                                            <img src="../.././../assets/images/profile/pic.png" class="img-fluid" alt="logo" width="100" height="100">
                                        </figure>
                                        <figcaption>
                                            <p><strong>Rishabh Rawat</strong> create a new survey</p><span class="unread"></span>
                                            <p>Track openion new survey</p>
                                            <div class="date-time">
                                                <span>Friday 2:30pm - Jan 20, 2024</span>
                                            </div>
                                        </figcaption>
                                    </li>
                                    <li>
                                        <figure>
                                            <img src="../.././../assets/images/logo/T-logo.png" class="img-fluid" alt="logo" width="100" height="100">
                                        </figure>
                                        <figcaption>
                                            <p><strong>Rishabh Rawat</strong> create a new survey</p> <span class="unread"></span>
                                            <p>Track openion new survey</p>
                                            <div class="date-time">
                                                <span>Friday 2:30pm - Jan 20, 2024</span>
                                            </div>
                                        </figcaption>
                                    </li>
                                    <li>
                                        <figure>
                                            <img src="../.././../assets/images/profile/pic.png" class="img-fluid" alt="logo" width="100" height="100">
                                        </figure>
                                        <figcaption>
                                            <p><strong>Rishabh Rawat</strong> create a new survey</p>
                                            <p>Track openion new survey</p>
                                            <div class="date-time">
                                                <span>Friday 2:30pm - Jan 20, 2024</span>
                                            </div>
                                        </figcaption>
                                    </li> -->
                                </ul>
                            </div>
                            <div class="tab-pane fade" id="global-tab-pane" role="tabpanel" aria-labelledby="global-tab"
                                tabindex="0">
                                <ul *ngFor="let item of notificationdata">
                                    <li *ngIf="item.isGlobal === true">
                                        <figure>
                                            <img [src]="item.image" class="img-fluid" alt="logo" width="100"
                                                height="100">
                                            <span class="admin-verified"><img *ngIf="item.status === 'ACT'"
                                                [src]="baseUrl + '/assets/images/icons/verify.png'"    
                                                class="img-fluid"
                                                    alt="admin" width="20" height="20"></span>
                                        </figure>
                                        <figcaption>
                                            <p><strong>{{item.userName}}</strong></p>
                                            <p>{{item.massage}}</p>
                                            <div class="date-time">
                                                <span>{{item.createdDate | date: 'medium'}}</span>
                                            </div>
                                        </figcaption>
                                    </li>
                                </ul>
                                <div class="notification-empty">
                                    Currently, nothing to report!
                                </div>
                            </div>
                        </div>
                        <div class="text-end border-top p-3">
                            <button type="button" class="btn btn-sm btn-primary">View All</button>
                        </div>
                    </div>

                </div>
                <!-- <div class="position-relative d-inline-block ms-4 dropdown">
                    <a class="nav-link" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        <img class="object-fit-cover rounded-circle" src="{{image}}" width="45" height="45" />
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item py-2" routerLink="/account/my-account">My Account</a></li>
                            <li><a class="dropdown-item py-2" routerLink="login" (click)="logOut()">Logout</a></li>
                        </ul>
                    </a>
                </div> -->
                <div class="position-relative d-inline-block ms-4 dropdown">
                    <ng-container *ngIf="image === null; else globalImage">
                        <a class="nav-link" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            <div class="me-2 rounded-circle defaultglobal">
                                {{ (firstName ? firstName.charAt(0) : '') + (lastName ? lastName.charAt(0) : '')
                                }}
                            </div>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item py-2" routerLink="/account/my-account">My Account</a></li>
                                <li><a class="dropdown-item py-2" routerLink="login" (click)="logOut()">Logout</a></li>
                            </ul>
                        </a>
                    </ng-container>
                    <ng-template #globalImage>
                        <a class="nav-link" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">

                            <img class="object-fit-cover rounded-circle" [src]="image" width="45" height="45" />
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item py-2" routerLink="/account/my-account">My Account</a></li>
                                <li><a class="dropdown-item py-2" routerLink="login" (click)="logOut()">Logout</a></li>
                            </ul>
                        </a>
                    </ng-template>
                </div>

            </div>
        </div>
    </div>
</header>

<ng-template #popupTemplate let-modal>
    <div class="modal-body text-center p-5">
      <h3>Your trial period has ended</h3>
      <p>Your trial period has expired. Please upgrade your plan first to continue for using our services.</p>
      <a class="btn btn-primary mt-3 me-2" routerLink="/payment" (click)="modal.dismiss('Cross click')">Upgrade</a>
      <button class="btn btn-primary mt-3"  (click)="logOut()">Back to Login</button>
    </div>
</ng-template>